// Generated by CoffeeScript 1.6.3
(function() {
  var Parallax, bootstrap, canvas, doc, jQuery, root;

  root = this;

  jQuery = root.jQuery;

  canvas = jQuery(root);

  doc = jQuery(root.document);

  Parallax = (function() {
    Parallax.prototype.canvas = null;

    Parallax.prototype.app = null;

    function Parallax(service) {
      this.app = service.jQuery;
      this.canvas = this.app(service);
      this.parallax();
      this.header();
    }

    Parallax.prototype.parallax = function() {
      var app, content, header, isFixed, nav, navHomeY, slider;
      app = this.app;
      canvas = this.canvas;
      nav = app('#fixed-nav');
      header = app('#header.inner');
      slider = app('#slider');
      content = app('body.home #content');
      navHomeY = nav.offset().top;
      isFixed = false;
      canvas.scroll(function() {
        var scrollTop, shouldBeFixed;
        scrollTop = canvas.scrollTop();
        shouldBeFixed = scrollTop > navHomeY;
        if (shouldBeFixed && !isFixed) {
          nav.css({
            position: 'fixed',
            width: '100%',
            top: 0,
            opacity: 0.95
          });
          header.css({
            paddingTop: '112px'
          });
          slider.css({
            paddingTop: '112px'
          });
          content.css({
            marginTop: '112px'
          });
          return isFixed = true;
        } else if (!shouldBeFixed && isFixed) {
          nav.css({
            position: 'relative',
            width: '100%',
            opacity: 1
          });
          header.css({
            paddingTop: '0'
          });
          slider.css({
            paddingTop: '0'
          });
          content.css({
            marginTop: '0'
          });
          return isFixed = false;
        }
      });
      return true;
    };

    Parallax.prototype.header = function() {
      var app;
      app = this.app;
      canvas = this.canvas;
      return canvas.scroll(function() {
        var scroll, slowScroll;
        scroll = canvas.scrollTop();
        slowScroll = scroll / 2;
        return app('#header').css({
          transform: "translateY(" + slowScroll + "px)"
        });
      });
    };

    return Parallax;

  })();

  bootstrap = function($) {
    $('li', '#primary').hover(function() {
      $(this).find('ul:first').stop(true, true).animate({
        height: ['toggle', 'swing'],
        opacity: 'toggle'
      }, 300, 'linear');
      return true;
    });
    $('pre').addClass('prettyprint');
    new Parallax(root);
    return true;
  };

  jQuery(bootstrap);

}).call(this);
